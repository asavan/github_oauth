<html>
<head>
<style>
   h1 {
    font-family: 'Times New Roman', Times, serif; /* Гарнитура текста */ 
    font-size: 250%; /* Размер шрифта в процентах */ 
   } 
   p {
    font-family: Verdana, Arial, Helvetica, sans-serif; 
    font-size: 30pt; /* Размер шрифта в пунктах */ 
   }
  </style>
</head>
<body>
<p>♜ ♞ ♝ ♛ ♚ ♝ ♞ ♜</p>
<p>♟ ♟ ♟ ♟ ♟ ♟ ♟ ♟</p>
<p>💩💩💩💩💩💩💩💩</p>
<p>💩💩💩💩💩💩💩💩</p>
<p>💩💩💩💩💩💩💩💩</p>
<p>💩💩💩💩💩💩💩💩</p>
<p>♙ ♙ ♙ ♙ ♙ ♙ ♙ ♙</p>
<p>♖ ♘ ♗ ♕ ♔ ♗ ♘ ♖</p>
<script>
	function main() {
		const sec = "34dc99810e7842f68a0abb43b7fca74b552ea36d";
		const cid = "ef25160563172c2b50ad";
		const secret_state = "alco";
		
		const queryString = window.location.search;
        const urlParams = new URLSearchParams(queryString);
        const code = urlParams.get('code');
		function postData(url = '', data = {}) {
		  // Значения по умолчанию обозначены знаком *
			return fetch(url, {
				method: 'POST', // *GET, POST, PUT, DELETE, etc.
//				mode: 'cors', // no-cors, cors, *same-origin
//				cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached
//				credentials: 'same-origin', // include, *same-origin, omit
				headers: {
					'Content-Type': 'application/json',
					// 'Content-Type': 'application/x-www-form-urlencoded',
				},
//				redirect: 'follow', // manual, *follow, error
//				referrer: 'no-referrer', // no-referrer, *client
				body: JSON.stringify(data), // тип данных в body должен соответвовать значению заголовка "Content-Type"
			})
			.then(response => response.json()); // парсит JSON ответ в Javascript объект
		}
		if (!code) {
			const params = new URLSearchParams({
				  client_id: cid,
				  state: secret_state
			});
			window.location.href = "https://github.com/login/oauth/authorize?" + params.toString();
		} else {
			const state = urlParams.get('state');
			if (state !== secret_state) {
				console.log("Bad state");
				return false;
			}
			const tokenUrl = "https://github.com/login/oauth/access_token";
			const tokenParams = {
				client_id: cid,
				client_secret: sec,
				code: code,
				state: secret_state
			}
			postData(tokenUrl, tokenParams)
				.then(data => console.log(JSON.stringify(data))) // JSON-строка полученная после вызова `response.json()`
				.catch(error => console.error(error));
		}
	}
	main();
</script>

</body>