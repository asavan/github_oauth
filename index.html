<html>
<head>
<style>
   p {
    margin: 0;
    padding: 0;
    font-family: monospace;
    font-size: 30pt; /* Размер шрифта в пунктах */ 
   }
  </style>
</head>
<body>
<p>♜♞♝♛♚♝♞♜</p>
<p>♟♟♟♟♟♟♟♟</p>
<p>⬛▢⏹▢⏹▢◼▢</p>
<p>💩💩💩💩💩💩💩💩</p>
<p>💩💩💩💩💩💩💩💩</p>
<p>💩💩💩💩💩💩💩💩</p>
<p>♙ ♙ ♙ ♙ ♙ ♙ ♙ ♙</p>
<p>♖ ♘ ♗ ♕ ♔ ♗ ♘ ♖</p>
<script>

	function main() {
		const cid = "ef25160563172c2b50ad";
		const secret_state = "alco";
		
		const queryString = window.location.search;
        const urlParams = new URLSearchParams(queryString);
        const code = urlParams.get('code');
		if (!code) {
			const params = new URLSearchParams({
				  client_id: cid,
				  state: secret_state
			});
			window.location.href = "https://github.com/login/oauth/authorize?" + params.toString();
		} else {
			const state = urlParams.get('state');
			if (state !== secret_state) {
				console.log("Bad state");
				return false;
			}
			const tokenUrl = "https://abrasive-wave-soda.glitch.me/update";
			const tokenParams = {
				code: code,
				state: secret_state
			}
			const params = new URLSearchParams(tokenParams);
			const fullUrl = tokenUrl + "?" + params.toString();
			console.log(fullUrl);
			fetch(fullUrl, {
			mode: 'no-cors',
			headers: {
				'Content-Type': 'application/json',
				'Accept': 'application/json'
			}
			})
			.then(response => response.json())
			.then(data => console.log(JSON.stringify(data)));
		}
	}
	main();
</script>

</body>
